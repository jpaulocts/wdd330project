import{g as l,b as c,l as n}from"./utils-CbGXeFri.js";function u(o){const e=new FormData(o),t={};return e.forEach(function(i,r){t[r]=i}),t}function h(o){return o.map(t=>(console.log(t),{id:t.recipe.label,label:t.recipe.calories,type:t.recipe.mealType,dish:t.recipe.dishType}))}class d{constructor(e,t){this.key=e,this.outputSelector=t,this.list=[],this.itemTotal=0,this.shipping=0,this.tax=0,this.orderTotal=0}init(){this.list=l(this.key),this.calculateItemSummary()}calculateItemSummary(){const e=document.querySelector(this.outputSelector+" #num-items"),t=document.querySelector(this.outputSelector+" #cartTotal");e.textContent=`${this.list.length} ${this.list.length>1?"recipes":"recipe"}`;const i=this.list.map(r=>r.recipe.calories);this.itemTotal=i.reduce((r,a)=>r+a),t.textContent=this.itemTotal.toFixed(0)+" kcal"}calculateOrdertotal(){this.shipping=c(parseFloat(document.querySelector("#todayWeight").value),parseFloat(document.querySelector("#height").value)),this.tax=c(parseFloat(document.querySelector("#intendedWeight").value),parseFloat(document.querySelector("#height").value)),this.orderTotal=this.shipping-this.tax,this.displayOrderTotals()}displayOrderTotals(){const e=document.querySelector(this.outputSelector+" #shipping"),t=document.querySelector(this.outputSelector+" #tax"),i=document.querySelector(this.outputSelector+" #orderTotal");e.innerText=this.shipping.toFixed(2),t.innerText=this.tax.toFixed(2),i.innerText=this.orderTotal.toFixed(2)+" Kg/mÂ²"}async checkout(){const e=document.forms.checkout,t=u(e);t.orderDate=new Date,t.orderTotal=this.orderTotal,t.tax=this.tax,t.shipping=this.shipping,t.items=h(this.list),console.log(t)}}n();const s=new d("so-cart",".checkout-summary");s.init();document.querySelector("#height").addEventListener("blur",s.calculateOrdertotal.bind(s));document.querySelector("#checkoutSubmit").addEventListener("click",o=>{o.preventDefault();const e=document.forms[0],t=e.checkValidity();e.reportValidity(),t&&s.checkout()});
